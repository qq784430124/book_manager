{% extends 'base.html' %}

{% block main_content %}
	<div class="container">
		<div class="row">
			<table class="table table-hover table-bordered">
				<tr>
					<th>ISBN</th>
					<th>类型</th>
					<th>书名</th>
					<th>作者</th>
					<th>出版社</th>
					<th>售价</th>
					<th>标签</th>
					<th>操作</th>
				</tr>
				{% for book in books %}
					<tr>
						<td>{{ book['book_id'] }}</td>
						<td>{{ book['category_name'] }}</td>
						<td>{{ book['book_title'] }}</td>
						<td>{{ book['book_author'] }}</td>
						<td>{{ book['book_publisher'] }}</td>
						<td>￥{{ book['book_price'] }}</td>
						<td>{% if book['book_markdown'] == 1 %}
							<span class="label label-success">特价</span>
						{% endif %}
							{% if book['book_add'] == 1 %}
								<span class="label label-info">加印</span>
							{% endif %}</td>
						<td>
							<a href="#" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#{{ book['book_id'] }}"
							   title="修改">
								<i class="fa fa-pencil fa-fw" aria-hidden="true"></i>修改
							</a>
							<a href="{{ url_for('delate_book',book_id=book['book_id']) }}" class="btn btn-danger btn-sm" title="删除"><i
								class="fa fa-trash-o fa-fw" aria-hidden="true"></i>删除
							</a>
						</td>
					</tr>
				{% endfor %}
			</table>
		</div>
	</div>
	<!-- Modal -->
	{% for book in books %}
		<div class="modal fade" id="{{ book['book_id'] }}" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
						aria-hidden="true">&times;</span></button>
					<h5 class="modal-title" id="myModalLabel">图书详情</h5>
				</div>
				<div class="modal-body">
					<form action="{{ url_for('book_post') }}" method="post" class="form-horizontal">
						<div class="form-group">
							<label for="title" class="col-md-2 control-label">书名</label>
							<div class="col-md-6">
								<input type="text" id="name" name="name" class="form-control" value="{{ book['book_title'] }}">
							</div>
						</div>
						<div class="form-group">
							<label for="publisher" class="col-md-2 control-label">出版社</label>
							<div class="col-md-6">
								<input type="text" id="publisher" name="publisher" class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label for="publish-time" class="col-md-2 control-label">出版时间</label>
							<div class="col-md-5">
								<input type="text" id="publish-time" name="publish-time" class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label for="author" class="col-md-2 control-label">作者</label>
							<div class="col-md-5">
								<input type="text" id="author" name="author" class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label for="price" class="col-md-2 control-label">定价</label>
							<div class="col-md-3">
								<input type="text" id="price" name="price" class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label for="ISBN" class="col-md-2 control-label">ISBN</label>
							<div class="col-md-3">
								<input type="text" id="ISBN" name="ISBN" class="form-control">
							</div>
						</div>
						<div class="form-group">
							<label for="" class="col-md-2 control-label">封面</label>
							<div class="col-md-5">
								<input type="file" name="bookcover">
							</div>
						</div>
						<div class="form-group">
							<label for="category" class="col-md-2 control-label">分类</label>
							<div class="col-md-4">
								<select class="form-control" name="category" id="category">
									{% for category in category %}
										<option value="{{ category['category_id'] }}">{{ category['category_name'] }}</option>
									{% endfor %}
								</select>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-10 col-md-offset-2">
								<input id="markdown" name="markdown" type="checkbox"><label for="markdown">特价</label>
								<input id="add" name="add" type="checkbox"><label for="add">加印</label>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary">保存</button>
				</div>
			</div>
		</div>
	</div>
	{% endfor %}
{% endblock %}